# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PHP –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

## üìä –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ PHP Backend API (`api/index.php`)
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤—Å–µ endpoints –Ω–∞ PHP
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ POST /api/save - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GET /api/history/:userId - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DELETE /api/history/:userId/:id - —É–¥–∞–ª–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GET/POST /api/settings/:userId - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GET /api/files/:userId/* - —Ñ–∞–π–ª—ã

### ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤
- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ —á–∏—Å—Ç—ã–π HTML/CSS/JS
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è API (`/api`)
- –ù–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç Node.js –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏

### ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **Docker** - –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Apache + PHP
- **Apache** - –∫–æ–Ω—Ñ–∏–≥ .htaccess –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- **Nginx** - –∫–æ–Ω—Ñ–∏–≥ nginx.conf –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- **–õ–æ–∫–∞–ª—å–Ω–æ** - router.php –¥–ª—è PHP dev —Å–µ—Ä–≤–µ—Ä–∞

### ‚úÖ –°–±–æ—Ä–∫–∞
- `npm run build` - —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—ë –≤ `dist/` –≥–æ—Ç–æ–≤–æ–µ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã
- –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –≤ `data/` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–±–æ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
npm install

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run build

# –ü–∞–ø–∫–∞ dist/ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### 1. Docker (1 –∫–æ–º–∞–Ω–¥–∞) ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
```bash
docker-compose up --build
```
‚úì –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost

#### 2. Apache (3 –∫–æ–º–∞–Ω–¥—ã)
```bash
sudo cp -r dist/* /var/www/html/
sudo a2enmod rewrite headers deflate
sudo systemctl restart apache2
```
‚úì –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost

#### 3. Nginx (4 –∫–æ–º–∞–Ω–¥—ã)
```bash
sudo cp -r dist/* /var/www/html/
sudo cp nginx.conf /etc/nginx/sites-available/app
sudo ln -s /etc/nginx/sites-available/app /etc/nginx/sites-enabled/
sudo systemctl restart nginx
```
‚úì –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost

#### 4. –õ–æ–∫–∞–ª—å–Ω–æ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
```bash
cd dist
php -S localhost:8080
```
‚úì –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080

---

## üìÅ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
üì¶ –ü—Ä–æ–µ–∫—Ç
‚îú‚îÄ‚îÄ src/                      # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ index.php            # ‚ú® PHP API —Ä–æ—É—Ç–µ—Ä (–≥–ª–∞–≤–Ω—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îú‚îÄ‚îÄ dist/                     # üöÄ –ì–æ—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Å–ª–µ npm run build)
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ router.php           # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ PHP —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ .htaccess            # –î–ª—è Apache
‚îÇ   ‚îú‚îÄ‚îÄ assets/              # JS/CSS
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # PHP API (–∫–æ–ø–∏—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php
‚îÇ   ‚îî‚îÄ‚îÄ data/                # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è
‚îÇ       ‚îî‚îÄ‚îÄ {userId}/
‚îÇ           ‚îú‚îÄ‚îÄ images/
‚îÇ           ‚îú‚îÄ‚îÄ logs/
‚îÇ           ‚îî‚îÄ‚îÄ settings.json
‚îú‚îÄ‚îÄ vite.config.ts           # –ö–æ–Ω—Ñ–∏–≥ Vite
‚îú‚îÄ‚îÄ nginx.conf               # –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è Nginx
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose
‚îú‚îÄ‚îÄ package.json             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js
‚îî‚îÄ‚îÄ README.md
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

–í–ª–æ–∂–µ–Ω–æ –≤ –ø–∞–ø–∫—É dist/ - –≤—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ:

```bash
# –°–ø–æ—Å–æ–± 1: PHP dev —Å–µ—Ä–≤–µ—Ä —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π
cd dist
php -S localhost:8080 router.php

# –°–ø–æ—Å–æ–± 2: Docker
docker-compose up --build

# –í –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8080 –∏–ª–∏ http://localhost
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ API:**
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
curl http://localhost:8080/api/history/test-user
# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: []
```

---

## üìã API Endpoints

–í—Å–µ API –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ–¥ `/api`:

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|---------|
| GET | `/api/history/:userId` | –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/api/history/:userId?date=YYYY-MM-DD` | –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –¥–∞—Ç—É |
| POST | `/api/save` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| DELETE | `/api/history/:userId/:id` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |
| GET | `/api/settings/:userId` | –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| POST | `/api/settings/:userId` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| GET | `/api/files/:userId/*` | –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª |

**–ü—Ä–∏–º–µ—Ä POST /api/save:**
```bash
curl -X POST http://localhost:8080/api/save \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user123",
    "type": "single",
    "model": "gemini-3-pro",
    "prompt": "Describe this",
    "text": "Result",
    "timestamp": 1704067200
  }'
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ CORS –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ `api/index.php`)
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∞—Ç–∞–∫
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è userId
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Node.js (–±—ã–ª–æ) | PHP (—Å–µ–π—á–∞—Å) |
|----------|----------------|-------------|
| Backend | Express.js | PHP + Apache/Nginx |
| Frontend | Vite dev | Vite build ‚Üí HTML |
| –ü–æ—Ä—Ç—ã | 3000 + 3001 | 1 (80 –∏–ª–∏ 8080) |
| –•–æ—Å—Ç–∏–Ω–≥ | Node.js —Ö–æ—Å—Ç–∏–Ω–≥ | –õ—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ —Å PHP 7.4+ |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | –ù–µ—Ç | ‚úì Docker –≥–æ—Ç–æ–≤ |
| –†–∞–∑–º–µ—Ä | ~500MB | ~50MB |
| –°–∫–æ—Ä–æ—Å—Ç—å | –•–æ—Ä–æ—à–∞—è | ‚úì –û—Ç–ª–∏—á–Ω–∞—è (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π + PHP) |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | ‚úì –•–æ—Ä–æ—à–∞—è |

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **DEPLOYMENT.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (>200 —Å—Ç—Ä–æ–∫)
- **api/README.md** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PHP API
- **MIGRATION_COMPLETE.md** - –ò—Ç–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML + –ª–µ–≥–∫–∏–π PHP
‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, gzip, CDN friendly
‚úÖ **–ü—Ä–æ—â–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ
‚úÖ **Docker –≥–æ—Ç–æ–≤** - –æ–¥–∏–Ω docker-compose up
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–µ—Ä—ã

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm run dev           # –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä Vite (–ø–æ—Ä—Ç 3000)
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
```bash
npm run build         # –°–±–æ—Ä–∫–∞ –≤ dist/
docker-compose up     # –∏–ª–∏ apache/nginx –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
cd dist
php -S localhost:8080 router.php
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404

**Apache:**
- `sudo a2enmod rewrite` - –≤–∫–ª—é—á–∏—Ç—å mod_rewrite
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.htaccess` –≤ dist/

**Nginx:**
- `sudo nginx -t` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
- `systemctl status php8.2-fpm` - PHP-FPM —Ä–∞–±–æ—Ç–∞–µ—Ç?

### ‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

- `chmod 777 dist/data` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Apache: `tail -f /var/log/apache2/error.log`

### ‚ùå –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ assets/
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ index.html –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ dist/

---

## üöÄ Production Deployment

### SSL/HTTPS
```bash
# Let's Encrypt (Apache)
sudo certbot --apache -d yourdomain.com

# Let's Encrypt (Nginx)
sudo certbot --nginx -d yourdomain.com
```

### Performance
- –í–∫–ª—é—á–∏—Ç–µ gzip –∫–æ–º–ø—Ä–µ—Å—Å–∏—é
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Cache-Control headers)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ PHP opcache

### Backup
```bash
# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö
tar -czf backup_$(date +%Y%m%d).tar.gz dist/data/
```

---

## üìû –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- ‚úÖ PHP API –≥–æ—Ç–æ–≤–∞
- ‚úÖ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–æ—Ç–æ–≤
- ‚úÖ Apache –∫–æ–Ω—Ñ–∏–≥ –≥–æ—Ç–æ–≤
- ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥ –≥–æ—Ç–æ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ dist/ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ DEPLOYMENT.md

–£–¥–∞—á–∏! üöÄ
