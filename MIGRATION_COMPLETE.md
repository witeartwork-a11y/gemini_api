# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! PHP Backend –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## üìä –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úì –°–æ–∑–¥–∞–Ω–∞ PHP API
- `api/index.php` - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –Ω–∞ PHP
- –í—Å–µ endpoints (save, history, settings, files) –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ PHP
- CORS –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### ‚úì –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤ –∫ —Å–±–æ—Ä–∫–µ
- React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Vite
- –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç Node.js

### ‚úì –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —É–ø—Ä–æ—â–µ–Ω–æ
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Apache + PHP)
- –ö–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è Apache (.htaccess)
- –ö–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è Nginx (nginx.conf)
- –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### ‚úì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `DEPLOYMENT.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- `api/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –°–±–æ—Ä–∫–∞ (2 –∫–æ–º–∞–Ω–¥—ã)

```bash
npm install
npm run build
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ø–∞–ø–∫–∞ `dist/` –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### 2Ô∏è‚É£ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

#### –í–∞—Ä–∏–∞–Ω—Ç A: Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
docker-compose up --build
```
–û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost`

#### –í–∞—Ä–∏–∞–Ω—Ç B: Apache
```bash
sudo cp -r dist/* /var/www/html/
sudo chown -R www-data:www-data /var/www/html/
sudo a2enmod rewrite headers deflate
sudo systemctl restart apache2
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: Nginx
```bash
sudo cp -r dist/* /var/www/html/
sudo cp nginx.conf /etc/nginx/sites-available/app
sudo ln -s /etc/nginx/sites-available/app /etc/nginx/sites-enabled/
sudo systemctl restart nginx
```

#### –í–∞—Ä–∏–∞–Ω—Ç D: –õ–æ–∫–∞–ª—å–Ω–æ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
```bash
cd dist
php -S localhost:8080
```
–û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:8080`

---

## üìÅ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
dist/                          # –ì–æ—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ index.html                 # React app
‚îú‚îÄ‚îÄ .htaccess                  # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è Apache
‚îú‚îÄ‚îÄ nginx.conf (–≤ –∫–æ—Ä–Ω–µ)       # –ö–æ–Ω—Ñ–∏–≥ Nginx
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ index.[hash].js        # –°–æ–±—Ä–∞–Ω–Ω—ã–π JS
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ index.php              # PHP API —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îî‚îÄ‚îÄ data/                      # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è
    ‚îî‚îÄ‚îÄ {userId}/
        ‚îú‚îÄ‚îÄ images/{date}/     # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        ‚îú‚îÄ‚îÄ logs/              # JSON –ª–æ–≥–∏
        ‚îî‚îÄ‚îÄ settings.json      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `api/index.php` | PHP API —Ä–æ—É—Ç–µ—Ä |
| `.htaccess` | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è Apache |
| `nginx.conf` | –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è Nginx |
| `Dockerfile` | Docker –æ–±—Ä–∞–∑ |
| `docker-compose.yml` | Docker Compose –∫–æ–Ω—Ñ–∏–≥ |
| `vite.config.ts` | –ö–æ–Ω—Ñ–∏–≥ Vite –¥–ª—è —Å–±–æ—Ä–∫–∏ |
| `copy-files-node.mjs` | –°–∫—Ä–∏–ø—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ |

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **`README.md`** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **`DEPLOYMENT.md`** - üìö –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–æ –≤—Å–µ–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- **`api/README.md`** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PHP API endpoints
- **`.env.example`** - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
./test-local.sh

# –∏–ª–∏ –≤—Ä—É—á–Ω—É—é
cd dist
php -S localhost:8080
# –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

---

## üê≥ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
npm run build
docker-compose up --build

# –õ–æ–≥–∏
docker-compose logs -f web

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ
http://localhost
```

---

## üåê API Endpoints

–í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ `/api`:

```
POST   /api/save                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
GET    /api/history/:userId         –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
DELETE /api/history/:userId/:id     –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
GET    /api/settings/:userId        –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POST   /api/settings/:userId        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET    /api/files/:userId/*         –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ –∏ –ü–æ—Å–ª–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ (Node.js) | –ü–æ—Å–ª–µ (PHP) |
|----------|------------|-----------|
| Backend | Express.js | PHP + Apache/Nginx |
| Frontend | Vite dev | Vite build ‚Üí Static HTML |
| –ü–æ—Ä—Ç—ã | 3000 + 3001 | 80 (–æ–¥–∏–Ω) |
| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ | Node.js —Ö–æ—Å—Ç–∏–Ω–≥ | –õ—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ —Å PHP |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | –ù–µ—Ç | Docker –≥–æ—Ç–æ–≤ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –•–æ—Ä–æ—à–∞—è | –û—Ç–ª–∏—á–Ω–∞—è (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π + PHP) |

---

## ‚ú® –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç—ã–π HTML/JS/CSS
‚úÖ **–ë—ç–∫–µ–Ω–¥:** PHP API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
‚úÖ **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** Docker, Apache, Nginx –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã + –ª–µ–≥–∫–∏–π PHP
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ —Å PHP 7.4+
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** CORS, –∑–∞—â–∏—Ç–∞ –æ—Ç traversal –∞—Ç–∞–∫, –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

## üö® –í–∞–∂–Ω–æ!

1. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PHP –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –≤ –ø–∞–ø–∫—É `data`
2. **mod_rewrite (Apache):** –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
3. **PHP —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:** –ù—É–∂–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ (json, mbstring)
4. **Backup:** –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `data`

---

## üìû Troubleshooting

### API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ mod_rewrite –Ω–∞ Apache
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.htaccess` –≤ dist/

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `chmod 777 dist/data`
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /var/log/apache2/error.log`

### CORS –æ—à–∏–±–∫–∏
‚Üí CORS –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `api/index.php` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º–æ—Ç—Ä–∏ `DEPLOYMENT.md`

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é. 

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `DEPLOYMENT.md`.

–£–¥–∞—á–∏! üöÄ
